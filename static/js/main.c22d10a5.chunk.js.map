{"version":3,"sources":["assets/bell.png","App.js","Game.js","GameView.js","serviceWorker.js","index.js"],"names":["module","exports","game","defaultOptions","deckSize","deckOptions","demoDeck","shuffle","arr","i","length","j","Math","floor","random","temp","Game","numOfPlayers","debug","setter","this","log","turns","logger","push","_start","_end","deck","genDeck","playerDeckSize","players","Array","fill","map","v","createPlayer","round","state","start","end","console","sync","id","slice","ready","lose","win","player","some","lastWin","newTurns","find","turn","cards","flat","draw","newPlayers","cardsToAdd","filter","card","playerId","value","reduce","drawTurns","isReady","lastTurnWin","getLastDrawTurns","returnDeckAndShuffle","classes","index","green","sum","otherPlayersHasCards","cardsSize","newDeck","penalty","GameView","useState","setState","useEffect","nextTurn","lastTurn","className","onClick","readyPlayer","class","ring","window","location","reload","App","setNumOfPlayers","setStart","process","src","Bell","type","onChange","e","Number","target","alert","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.c22d10a5.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAclBMVEX///8AAAAwMDDc3Nx0dHSGhobi4uKWlpby8vLn5+fe3t6Kioqampo1NTXY2Nh8fHxnZ2c/Pz+np6e3t7fOzs5ZWVkICAjDw8O9vb2srKxiYmJLS0vv7+/Jyclubm4SEhJSUlIeHh5GRkYoKCgXFxchISET1NyDAAAENElEQVR4nO3d7VriQAwFYCryURCQL0FEQXa9/1vcLdoV15JmMtNmMp739/7IebbtdDIpdjoAAAAAAAAAAAAAAACJm87mN3zzWVe7YFf3masX7ZLdTJwDZtlcu2gXM0HALBtrl823FwXMsqF24WwLYcKlduFsPWFCO5epNGFPu3A2JETC+CEhEsYv/YR3woR32oWzTYUJDe0R56KAT9plO+iLEubaZbuQXKeGrtHC0PV5OrazOfwn75/lVNZe+Y+0i/VCrR121gfKgEg40C4uCCS0DwntS/xZOlwtjkTC42JlcKUv7TeDNRHu03qw2WsX62y/vT2w0pUOs62hlKux5OgpyybjqXbpHM8vonSll2ftALT+2O3arHIY97VjXLWUXZzfzaM8hMplp6LX9GLbT3Xdz+3r3I+0Q12Y8tY9V+tY+hrdZvIVdjH8P+bN5TtnVL8fpQ18Pt2j78fG8xX01o78qZWAf3cgSq+s0vMXCY19ZD/UCwzPvPUnjnQoSO6x1XzDtu7AS8cWA0rPBz0dWnvHaf8KLbV0pfptcf3MWsg3lJ3vhtL8OXH/QTVglr02vGyslPMVGn3ebLTTna2aC7jUzvZh01TAdnYSHNvUAzYUMaaAjUTcamf6T/De+LN2om8Cn3F0tfNUCLr0Sz+CaVbIs9Vf2mEqBfwUTGO/y7ELFbD5nqhUoAZVHC+j1YK8osb5lCmFeNq02zV0FWBHHO9N+M57qiqGLS/N9wBOu/56r34Bwx9eh+f1pU1879tVfN7BtRtrPDfygLE/R0viVxvZly8apCeoJ+3C2e5lAWPrW1BkD5vf2mU7EG0V9c7QJCS9N+2a3by5B2xz0iIE96Eb7YpdOb+e2roLC653oo33tUsTt4CxnKO5cOvZxNkgpa1dAsa/s6/i0ua3sPH9zmESdahdqxA/obXVvsRf9S0+ZwpHbsCRdqVi3A74WLtQsQUzoaWN4VfMbaLS9GgQvCWR+vY6drwB1DftMj0cOQFz7Sq9cBLa2xle4gz17bSL9MI5ptGu0Q9jHxzj9JOL+ga/7duQcyNqfmsQQv0m0V4L6qva4Yy4p2c46hLaONem1P0ig/UHTX1n+Fa7QG91R952zn2vqTsP1q7PX80u2Gof8RKd0PL+vkS3o2KeluWipxbsLxZ1b6Z2G4mf6F5N2B8K0kHP1Nre4L+jt/m6nzGHQX/vbbmTWKK/M7G+Oyyckk9IN6O0qwuBHgDTri4IMuFtCsiEAAAAAADQoOGom57RZ/N7Zf/Aqdrp4wMFK9/CSpznFlJoc183sDzyzJMnfY0WBmbn8rlOaXTXCA/JJ8yQ0D4ktA8J7UNC+5DQPiS07wckTGG+hHLoUH/pNQXrJCZKKY+JjNBcdeikMdp93Xkkeur/11Fj9Vr+fOtyN7lJz2QX5R9sBQAAAAAAAAAAAACAn+sPSW103zWlZGUAAAAASUVORK5CYII=\"","import React, { useState, useEffect } from \"react\";\nimport Game from \"./Game\";\nimport Bell from \"./assets/bell.png\";\nimport GameView from \"./GameView\";\n\nconst debug = process.env.NODE_ENV !== \"production\";\nlet game;\n\nconst App = () => {\n  const [numOfPlayers, setNumOfPlayers] = useState(0);\n  const [start, setStart] = useState(false);\n\n  const startGame = () => {\n    if (numOfPlayers > 0) {\n      if (!game) {\n        game = new Game(numOfPlayers);\n        game.start();\n      }\n      setStart(true);\n    } else alert(\"Please fill number of players.\");\n  };\n\n  return (\n    <div className=\"container mx-auto\">\n      {start && game ? (\n        <GameView game={game} start={start} debug={debug} />\n      ) : (\n        <div className=\"flex items-center justify-center\">\n          <div>\n            <img src={Bell} />\n            <br />\n            <h3 className=\"text-2xl\">How many players?</h3>\n            <br />\n            <input\n              className=\"bg-white focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-4 block appearance-none leading-normal\"\n              type=\"number\"\n              onChange={(e) => setNumOfPlayers(Number(e.target.value))}\n            />\n            <br />\n            <button className=\"btn btn-blue mr-8\" onClick={() => startGame()}>\n              Start\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","const defaultOptions = {\r\n  deckSize: 20,\r\n  deckOptions: [0, 1, 2, 3, 4, 5],\r\n  demoDeck: [0, 5, 5, 0],\r\n};\r\n\r\nconst shuffle = (arr) => {\r\n  for (let i = arr.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * i);\r\n    const temp = arr[i];\r\n    arr[i] = arr[j];\r\n    arr[j] = temp;\r\n  }\r\n\r\n  return arr;\r\n};\r\n\r\nclass Game {\r\n  constructor(numOfPlayers, deckSize, { debug, setter } = {}) {\r\n    this.debug = debug;\r\n    this.setter = setter;\r\n    this.deckOptions = defaultOptions.deckOptions;\r\n    this.log = [];\r\n    this.turns = [];\r\n    this.logger = (log) => this.log.push(log);\r\n    this.logger(\"constructor\");\r\n    this._start = false;\r\n    this._end = false;\r\n    this.numOfPlayers = numOfPlayers;\r\n    this.deckSize = deckSize || defaultOptions.deckSize;\r\n    this.deck = this.debug\r\n      ? defaultOptions.demoDeck\r\n      : this.genDeck(this.deckSize);\r\n    this.playerDeckSize = Math.floor(this.deckSize / this.numOfPlayers);\r\n    this.players = Array(numOfPlayers)\r\n      .fill(0)\r\n      .map((v, i) => this.createPlayer(i + 1));\r\n  }\r\n\r\n  genDeck(deckSize) {\r\n    this.logger(\"genDeck\");\r\n    return shuffle(\r\n      Array(deckSize)\r\n        .fill(0)\r\n        .map(\r\n          () =>\r\n            this.deckOptions[\r\n              Math.round(Math.random() * this.deckOptions.length - 1)\r\n            ]\r\n        )\r\n    );\r\n  }\r\n\r\n  sync() {\r\n    const state = {\r\n      start: this._start,\r\n      end: this._end,\r\n      players: this.players,\r\n      turns: this.turns,\r\n    };\r\n\r\n    if (this.debug) {\r\n      console.log(\"state\", state);\r\n      console.log(\"game log:\", this.log);\r\n    }\r\n\r\n    if (this.setter) this.setter(state);\r\n  }\r\n\r\n  start() {\r\n    this.logger(\"start\");\r\n    this._start = true;\r\n    this.sync();\r\n  }\r\n\r\n  end() {\r\n    this.logger(\"end\");\r\n    this._end = true;\r\n    this.sync();\r\n  }\r\n\r\n  createPlayer(id) {\r\n    this.logger(\"createPlayer\");\r\n    return {\r\n      id,\r\n      deck: this.deck.slice(\r\n        this.playerDeckSize * (id - 1),\r\n        this.playerDeckSize * id\r\n      ),\r\n      ready: false,\r\n      lose: false,\r\n      win: false,\r\n    };\r\n  }\r\n\r\n  readyPlayer(id) {\r\n    this.logger(\"readyPlayer:\" + id);\r\n    this.players = this.players.map((player) => ({\r\n      ...player,\r\n      ready: id && !player.ready ? player.id === id : true,\r\n    }));\r\n    this.sync();\r\n  }\r\n\r\n  allNotReady() {\r\n    this.logger(\"allNotReady\");\r\n    this.players = this.players.map((player) => ({ ...player, ready: false }));\r\n    this.sync();\r\n  }\r\n\r\n  isReady() {\r\n    const ready = !this.players.some((player) => !player.ready && !player.lose);\r\n    this.logger(\"isReady:\" + ready);\r\n    return ready;\r\n  }\r\n\r\n  returnDeckAndShuffle() {\r\n    this.logger(\"returnDeckAndShuffle\");\r\n    let lastWin = this.turns.length - 1;\r\n    const newTurns = [...this.turns];\r\n    let draw = !newTurns.find((turn) => turn.win || turn.shuffle);\r\n    if (draw) {\r\n      lastWin = 0;\r\n    } else {\r\n      for (let i = newTurns.length - 1; i >= 0; i--) {\r\n        const turn = newTurns[i];\r\n        if (turn.win === true) {\r\n          lastWin = i;\r\n          break;\r\n        }\r\n        if (turn.shuffle === true && i < newTurns.length - 1) {\r\n          lastWin = i + 1;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    const cards = newTurns\r\n      .slice(lastWin)\r\n      .map((turn) => turn.cards)\r\n      .flat(1);\r\n    console.log({ cards, lastWin });\r\n    newTurns[newTurns.length - 1].draw = true;\r\n    newTurns[newTurns.length - 1].shuffle = true;\r\n    this.turns = newTurns;\r\n    const newPlayers = this.players.map((player) => {\r\n      const cardsToAdd = cards\r\n        .filter((card) => card.playerId === player.id)\r\n        .map((card) => card.value);\r\n      player.deck = [...player.deck, ...cardsToAdd];\r\n      player.deck = shuffle(player.deck);\r\n      return player;\r\n    });\r\n    this.players = newPlayers;\r\n    this.sync();\r\n  }\r\n\r\n  getLastDrawTurns() {\r\n    this.logger(\"getLastDrawTurns\");\r\n    let drawTurns = this.turns.reduce((drawTurns, turn, i) => {\r\n      if (turn.win || (turn.shuffle && i < this.turns.length - 1))\r\n        drawTurns = [];\r\n      else if (turn.draw) drawTurns = [...drawTurns, turn];\r\n\r\n      return drawTurns;\r\n    }, []);\r\n\r\n    return drawTurns;\r\n  }\r\n\r\n  nextTurn() {\r\n    if (!this.isReady() || !this._start || this._end) return;\r\n\r\n    this.logger(\"nextTurn\");\r\n    if (this.turns.length > 0) {\r\n      const lastTurnWin = this.turns[this.turns.length - 1].win;\r\n      if (\r\n        this.getLastDrawTurns().length > 0 &&\r\n        !lastTurnWin &&\r\n        this.players.find((player) => player.deck.length === 0 && !player.lose)\r\n      ) {\r\n        this.returnDeckAndShuffle();\r\n      }\r\n    }\r\n\r\n    const cards = this.players.map((player) => ({\r\n      playerId: player.id,\r\n      value: player.deck.length > 0 ? player.deck[0] : 0,\r\n      classes: shuffle(\r\n        Array(5)\r\n          .fill()\r\n          .map((value, index) => index < (player.deck[0] ? player.deck[0] : 0))\r\n          .map((green, index) =>\r\n            green ? \"circle bg-green-600\" : \"circle bg-red-600\"\r\n          )\r\n      ),\r\n    }));\r\n\r\n    this.turns = [\r\n      ...this.turns,\r\n      {\r\n        win: false,\r\n        draw: true,\r\n        cards,\r\n      },\r\n    ];\r\n\r\n    this.players = this.players.map((player) => ({\r\n      ...player,\r\n      deck: player.deck.slice(1),\r\n      ready: false,\r\n    }));\r\n    this.sync();\r\n  }\r\n\r\n  ring(playerId) {\r\n    this.logger(\"ring\");\r\n    const newTurns = [...this.turns];\r\n    const newPlayers = [...this.players];\r\n    const isWin =\r\n      newTurns[newTurns.length - 1].cards.reduce(\r\n        (sum, card) => (sum = sum + card.value),\r\n        0\r\n      ) === 5;\r\n    if (isWin) {\r\n      if (newTurns[newTurns.length - 1].win !== false) return;\r\n      newTurns[newTurns.length - 1].win = playerId;\r\n      newTurns[newTurns.length - 1].draw = false;\r\n      this.logger(`player ${playerId} win this turn.`);\r\n      this.turns = newTurns;\r\n\r\n      const otherPlayersHasCards = newPlayers.some(\r\n        (player) => player.deck.length > 0 && player.id !== playerId\r\n      );\r\n      if (!otherPlayersHasCards) this.end();\r\n\r\n      newPlayers.map((player) => {\r\n        if (player.id === playerId) {\r\n          player.deck = [\r\n            ...player.deck,\r\n            ...newTurns[newTurns.length - 1].cards.map((card) => card.value),\r\n          ];\r\n          if (!otherPlayersHasCards) {\r\n            player.win = true;\r\n            this.logger(`player ${player.id} win.`);\r\n          }\r\n        } else if (!otherPlayersHasCards) {\r\n          player.lose = true;\r\n          this.logger(`player ${player.id} lose.`);\r\n        }\r\n\r\n        return player;\r\n      });\r\n\r\n      this.players = newPlayers;\r\n    } else {\r\n      const player = newPlayers.find((player) => player.id === playerId);\r\n\r\n      const cardsSize = newPlayers.length - 2 < 1 ? 1 : newPlayers.length - 2;\r\n      let cards = player.deck.slice(0, cardsSize);\r\n      const newDeck = player.deck.slice(cardsSize);\r\n      this.players = newPlayers.map((player) => {\r\n        if (player.id === playerId) {\r\n          player.deck = newDeck;\r\n        } else if (cards.length > 0) {\r\n          player.deck = [...player.deck, cards[0]];\r\n          cards = cards.slice(1);\r\n        }\r\n        return player;\r\n      });\r\n\r\n      this.turns[this.turns.length - 1].draw = true;\r\n      this.turns[this.turns.length - 1].penalty = true;\r\n      this.logger(`this turn is a draw.`);\r\n    }\r\n\r\n    this.sync();\r\n  }\r\n}\r\n\r\nexport default Game;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"./GameView.css\";\r\n\r\nconst GameView = ({ game, start, debug }) => {\r\n  const [state, setState] = useState({\r\n    players: game.players,\r\n    turns: game.turns,\r\n    start: start,\r\n    end: false,\r\n  });\r\n  game.setter = setState;\r\n\r\n  useEffect(() => {\r\n    game.nextTurn();\r\n    console.log({ state });\r\n  }, [state]);\r\n\r\n  let cards = [];\r\n  const lastTurn = state.turns[state.turns.length - 1];\r\n  if (state.start && !state.end && state.turns.length > 0) {\r\n    cards = lastTurn.cards;\r\n    cards = cards.map((card, i) =>\r\n      card.classes.map((className) => <span className={className}></span>)\r\n    );\r\n  }\r\n  const drawTurns = game.getLastDrawTurns();\r\n\r\n  return (\r\n    <div className=\"container mx-auto\">\r\n      <div>\r\n        <h2 className=\"text-2xl\">\r\n          {state.start && !state.end\r\n            ? \"Press the play button to make your self ready, when all player are ready the cards will be revealed, if you can count 5 green balls ring your bell. \"\r\n            : \"The game is ended.\"}\r\n        </h2>\r\n      </div>\r\n\r\n      <div className=\"flex\">\r\n        {state.players.map((player) => (\r\n          <div className=\"flex-1 text-center items-center\">\r\n            <span\r\n              className={\r\n                player.ready\r\n                  ? \"text-6xl text-gray-500\"\r\n                  : \"text-6xl text-black cursor-pointer\"\r\n              }\r\n              onClick={() => game.readyPlayer(player.id)}\r\n            >\r\n              <i class=\"fa fa-play-circle\"></i>\r\n            </span>\r\n            <span\r\n              className={\r\n                player.lose || lastTurn?.penalty\r\n                  ? \"text-6xl text-gray-500\"\r\n                  : \"text-6xl text-black cursor-pointer\"\r\n              }\r\n              onClick={() => {\r\n                if (\r\n                  !player.lose &&\r\n                  state.turns.length > 0 &&\r\n                  !lastTurn?.penalty\r\n                )\r\n                  game.ring(player.id);\r\n              }}\r\n            >\r\n              <i className=\"fa fa-bell\"></i>\r\n            </span>\r\n\r\n            <div>\r\n              Player {player.id} (cards:{player.deck.length}) <br />\r\n              {player.win ? \"Winner!\" : player.lose ? \"Loser!\" : \"\"}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <div>\r\n        <h3>Pile ({drawTurns.length})</h3>\r\n        <div className=\"flex\">\r\n          {cards.length > 0 &&\r\n            cards.map((card) => (\r\n              <div className=\"flex-1 text-center items-center\">\r\n                <div className=\"border border-gray-600 w-1/2\">\r\n                  {card.slice(0, 2)}\r\n                  <br />\r\n                  {card[2]}\r\n                  <br />\r\n                  {card.slice(3)}\r\n                </div>\r\n              </div>\r\n            ))}\r\n        </div>\r\n      </div>\r\n\r\n      {debug && (\r\n        <div>\r\n          <div>\r\n            <button\r\n              className=\"btn btn-blue mr-8\"\r\n              onClick={() => game.readyPlayer()}\r\n            >\r\n              All Ready\r\n            </button>\r\n            <button\r\n              className=\"btn btn-blue mr-8\"\r\n              onClick={() => window.location.reload()}\r\n            >\r\n              End\r\n            </button>\r\n          </div>\r\n          <div>\r\n            <h3>Game Log:</h3>\r\n            <div className=\"overflow-scroll log-h\">\r\n              <ul>\r\n                {game.log.map((log) => (\r\n                  <li>{log}</li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameView;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./assets/main.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}