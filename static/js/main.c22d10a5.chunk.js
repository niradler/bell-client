(this["webpackJsonpbell-client"]=this["webpackJsonpbell-client"]||[]).push([[0],[,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAclBMVEX///8AAAAwMDDc3Nx0dHSGhobi4uKWlpby8vLn5+fe3t6Kioqampo1NTXY2Nh8fHxnZ2c/Pz+np6e3t7fOzs5ZWVkICAjDw8O9vb2srKxiYmJLS0vv7+/Jyclubm4SEhJSUlIeHh5GRkYoKCgXFxchISET1NyDAAAENElEQVR4nO3d7VriQAwFYCryURCQL0FEQXa9/1vcLdoV15JmMtNmMp739/7IebbtdDIpdjoAAAAAAAAAAAAAAACJm87mN3zzWVe7YFf3masX7ZLdTJwDZtlcu2gXM0HALBtrl823FwXMsqF24WwLYcKlduFsPWFCO5epNGFPu3A2JETC+CEhEsYv/YR3woR32oWzTYUJDe0R56KAT9plO+iLEubaZbuQXKeGrtHC0PV5OrazOfwn75/lVNZe+Y+0i/VCrR121gfKgEg40C4uCCS0DwntS/xZOlwtjkTC42JlcKUv7TeDNRHu03qw2WsX62y/vT2w0pUOs62hlKux5OgpyybjqXbpHM8vonSll2ftALT+2O3arHIY97VjXLWUXZzfzaM8hMplp6LX9GLbT3Xdz+3r3I+0Q12Y8tY9V+tY+hrdZvIVdjH8P+bN5TtnVL8fpQ18Pt2j78fG8xX01o78qZWAf3cgSq+s0vMXCY19ZD/UCwzPvPUnjnQoSO6x1XzDtu7AS8cWA0rPBz0dWnvHaf8KLbV0pfptcf3MWsg3lJ3vhtL8OXH/QTVglr02vGyslPMVGn3ebLTTna2aC7jUzvZh01TAdnYSHNvUAzYUMaaAjUTcamf6T/De+LN2om8Cn3F0tfNUCLr0Sz+CaVbIs9Vf2mEqBfwUTGO/y7ELFbD5nqhUoAZVHC+j1YK8osb5lCmFeNq02zV0FWBHHO9N+M57qiqGLS/N9wBOu/56r34Bwx9eh+f1pU1879tVfN7BtRtrPDfygLE/R0viVxvZly8apCeoJ+3C2e5lAWPrW1BkD5vf2mU7EG0V9c7QJCS9N+2a3by5B2xz0iIE96Eb7YpdOb+e2roLC653oo33tUsTt4CxnKO5cOvZxNkgpa1dAsa/s6/i0ua3sPH9zmESdahdqxA/obXVvsRf9S0+ZwpHbsCRdqVi3A74WLtQsQUzoaWN4VfMbaLS9GgQvCWR+vY6drwB1DftMj0cOQFz7Sq9cBLa2xle4gz17bSL9MI5ptGu0Q9jHxzj9JOL+ga/7duQcyNqfmsQQv0m0V4L6qva4Yy4p2c46hLaONem1P0ig/UHTX1n+Fa7QG91R952zn2vqTsP1q7PX80u2Gof8RKd0PL+vkS3o2KeluWipxbsLxZ1b6Z2G4mf6F5N2B8K0kHP1Nre4L+jt/m6nzGHQX/vbbmTWKK/M7G+Oyyckk9IN6O0qwuBHgDTri4IMuFtCsiEAAAAAADQoOGom57RZ/N7Zf/Aqdrp4wMFK9/CSpznFlJoc183sDzyzJMnfY0WBmbn8rlOaXTXCA/JJ8yQ0D4ktA8J7UNC+5DQPiS07wckTGG+hHLoUH/pNQXrJCZKKY+JjNBcdeikMdp93Xkkeur/11Fj9Vr+fOtyN7lJz2QX5R9sBQAAAAAAAAAAAACAn+sPSW103zWlZGUAAAAASUVORK5CYII="},function(e,t,n){e.exports=n(18)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,r=n(0),l=n.n(r),s=n(7),i=n.n(s),c=(n(16),n(3)),u=n(1),o=n(5),d=n(8),h=n(9),f={deckSize:20,deckOptions:[0,1,2,3,4,5],demoDeck:[0,5,5,0]},m=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*t),a=e[t];e[t]=e[n],e[n]=a}return e},g=function(){function e(t,n){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=r.debug,s=r.setter;Object(d.a)(this,e),this.debug=l,this.setter=s,this.deckOptions=f.deckOptions,this.log=[],this.turns=[],this.logger=function(e){return a.log.push(e)},this.logger("constructor"),this._start=!1,this._end=!1,this.numOfPlayers=t,this.deckSize=n||f.deckSize,this.deck=this.debug?f.demoDeck:this.genDeck(this.deckSize),this.playerDeckSize=Math.floor(this.deckSize/this.numOfPlayers),this.players=Array(t).fill(0).map((function(e,t){return a.createPlayer(t+1)}))}return Object(h.a)(e,[{key:"genDeck",value:function(e){var t=this;return this.logger("genDeck"),m(Array(e).fill(0).map((function(){return t.deckOptions[Math.round(Math.random()*t.deckOptions.length-1)]})))}},{key:"sync",value:function(){var e={start:this._start,end:this._end,players:this.players,turns:this.turns};this.debug&&(console.log("state",e),console.log("game log:",this.log)),this.setter&&this.setter(e)}},{key:"start",value:function(){this.logger("start"),this._start=!0,this.sync()}},{key:"end",value:function(){this.logger("end"),this._end=!0,this.sync()}},{key:"createPlayer",value:function(e){return this.logger("createPlayer"),{id:e,deck:this.deck.slice(this.playerDeckSize*(e-1),this.playerDeckSize*e),ready:!1,lose:!1,win:!1}}},{key:"readyPlayer",value:function(e){this.logger("readyPlayer:"+e),this.players=this.players.map((function(t){return Object(o.a)({},t,{ready:!(e&&!t.ready)||t.id===e})})),this.sync()}},{key:"allNotReady",value:function(){this.logger("allNotReady"),this.players=this.players.map((function(e){return Object(o.a)({},e,{ready:!1})})),this.sync()}},{key:"isReady",value:function(){var e=!this.players.some((function(e){return!e.ready&&!e.lose}));return this.logger("isReady:"+e),e}},{key:"returnDeckAndShuffle",value:function(){this.logger("returnDeckAndShuffle");var e=this.turns.length-1,t=Object(u.a)(this.turns);if(!t.find((function(e){return e.win||e.shuffle})))e=0;else for(var n=t.length-1;n>=0;n--){var a=t[n];if(!0===a.win){e=n;break}if(!0===a.shuffle&&n<t.length-1){e=n+1;break}}var r=t.slice(e).map((function(e){return e.cards})).flat(1);console.log({cards:r,lastWin:e}),t[t.length-1].draw=!0,t[t.length-1].shuffle=!0,this.turns=t;var l=this.players.map((function(e){var t=r.filter((function(t){return t.playerId===e.id})).map((function(e){return e.value}));return e.deck=[].concat(Object(u.a)(e.deck),Object(u.a)(t)),e.deck=m(e.deck),e}));this.players=l,this.sync()}},{key:"getLastDrawTurns",value:function(){var e=this;return this.logger("getLastDrawTurns"),this.turns.reduce((function(t,n,a){return n.win||n.shuffle&&a<e.turns.length-1?t=[]:n.draw&&(t=[].concat(Object(u.a)(t),[n])),t}),[])}},{key:"nextTurn",value:function(){if(this.isReady()&&this._start&&!this._end){if(this.logger("nextTurn"),this.turns.length>0){var e=this.turns[this.turns.length-1].win;this.getLastDrawTurns().length>0&&!e&&this.players.find((function(e){return 0===e.deck.length&&!e.lose}))&&this.returnDeckAndShuffle()}var t=this.players.map((function(e){return{playerId:e.id,value:e.deck.length>0?e.deck[0]:0,classes:m(Array(5).fill().map((function(t,n){return n<(e.deck[0]?e.deck[0]:0)})).map((function(e,t){return e?"circle bg-green-600":"circle bg-red-600"})))}}));this.turns=[].concat(Object(u.a)(this.turns),[{win:!1,draw:!0,cards:t}]),this.players=this.players.map((function(e){return Object(o.a)({},e,{deck:e.deck.slice(1),ready:!1})})),this.sync()}}},{key:"ring",value:function(e){var t=this;this.logger("ring");var n=Object(u.a)(this.turns),a=Object(u.a)(this.players);if(5===n[n.length-1].cards.reduce((function(e,t){return e+t.value}),0)){if(!1!==n[n.length-1].win)return;n[n.length-1].win=e,n[n.length-1].draw=!1,this.logger("player ".concat(e," win this turn.")),this.turns=n;var r=a.some((function(t){return t.deck.length>0&&t.id!==e}));r||this.end(),a.map((function(a){return a.id===e?(a.deck=[].concat(Object(u.a)(a.deck),Object(u.a)(n[n.length-1].cards.map((function(e){return e.value})))),r||(a.win=!0,t.logger("player ".concat(a.id," win.")))):r||(a.lose=!0,t.logger("player ".concat(a.id," lose."))),a})),this.players=a}else{var l=a.find((function(t){return t.id===e})),s=a.length-2<1?1:a.length-2,i=l.deck.slice(0,s),c=l.deck.slice(s);this.players=a.map((function(t){return t.id===e?t.deck=c:i.length>0&&(t.deck=[].concat(Object(u.a)(t.deck),[i[0]]),i=i.slice(1)),t})),this.turns[this.turns.length-1].draw=!0,this.turns[this.turns.length-1].penalty=!0,this.logger("this turn is a draw.")}this.sync()}}]),e}(),y=n(10),p=n.n(y),b=(n(17),function(e){var t=e.game,n=e.start,a=e.debug,s=Object(r.useState)({players:t.players,turns:t.turns,start:n,end:!1}),i=Object(c.a)(s,2),u=i[0],o=i[1];t.setter=o,Object(r.useEffect)((function(){t.nextTurn(),console.log({state:u})}),[u]);var d=[],h=u.turns[u.turns.length-1];u.start&&!u.end&&u.turns.length>0&&(d=(d=h.cards).map((function(e,t){return e.classes.map((function(e){return l.a.createElement("span",{className:e})}))})));var f=t.getLastDrawTurns();return l.a.createElement("div",{className:"container mx-auto"},l.a.createElement("div",null,l.a.createElement("h2",{className:"text-2xl"},u.start&&!u.end?"Press the play button to make your self ready, when all player are ready the cards will be revealed, if you can count 5 green balls ring your bell. ":"The game is ended.")),l.a.createElement("div",{className:"flex"},u.players.map((function(e){return l.a.createElement("div",{className:"flex-1 text-center items-center"},l.a.createElement("span",{className:e.ready?"text-6xl text-gray-500":"text-6xl text-black cursor-pointer",onClick:function(){return t.readyPlayer(e.id)}},l.a.createElement("i",{class:"fa fa-play-circle"})),l.a.createElement("span",{className:e.lose||(null===h||void 0===h?void 0:h.penalty)?"text-6xl text-gray-500":"text-6xl text-black cursor-pointer",onClick:function(){!e.lose&&u.turns.length>0&&!(null===h||void 0===h?void 0:h.penalty)&&t.ring(e.id)}},l.a.createElement("i",{className:"fa fa-bell"})),l.a.createElement("div",null,"Player ",e.id," (cards:",e.deck.length,") ",l.a.createElement("br",null),e.win?"Winner!":e.lose?"Loser!":""))}))),l.a.createElement("div",null,l.a.createElement("h3",null,"Pile (",f.length,")"),l.a.createElement("div",{className:"flex"},d.length>0&&d.map((function(e){return l.a.createElement("div",{className:"flex-1 text-center items-center"},l.a.createElement("div",{className:"border border-gray-600 w-1/2"},e.slice(0,2),l.a.createElement("br",null),e[2],l.a.createElement("br",null),e.slice(3)))})))),a&&l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-blue mr-8",onClick:function(){return t.readyPlayer()}},"All Ready"),l.a.createElement("button",{className:"btn btn-blue mr-8",onClick:function(){return window.location.reload()}},"End")),l.a.createElement("div",null,l.a.createElement("h3",null,"Game Log:"),l.a.createElement("div",{className:"overflow-scroll log-h"},l.a.createElement("ul",null,t.log.map((function(e){return l.a.createElement("li",null,e)})))))))}),v=function(){var e=Object(r.useState)(0),t=Object(c.a)(e,2),n=t[0],s=t[1],i=Object(r.useState)(!1),u=Object(c.a)(i,2),o=u[0],d=u[1];return l.a.createElement("div",{className:"container mx-auto"},o&&a?l.a.createElement(b,{game:a,start:o,debug:!1}):l.a.createElement("div",{className:"flex items-center justify-center"},l.a.createElement("div",null,l.a.createElement("img",{src:p.a}),l.a.createElement("br",null),l.a.createElement("h3",{className:"text-2xl"},"How many players?"),l.a.createElement("br",null),l.a.createElement("input",{className:"bg-white focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-4 block appearance-none leading-normal",type:"number",onChange:function(e){return s(Number(e.target.value))}}),l.a.createElement("br",null),l.a.createElement("button",{className:"btn btn-blue mr-8",onClick:function(){n>0?(a||(a=new g(n)).start(),d(!0)):alert("Please fill number of players.")}},"Start"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.c22d10a5.chunk.js.map